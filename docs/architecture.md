# FlexiPane.WPF 아키텍처 설계

## 개요

FlexiPane.WPF는 WPF 애플리케이션에서 동적 화면 분할 기능을 제공하는 범용 라이브러리입니다. FastFinder 프로젝트에서 검증된 분할 메커니즘을 기반으로 설계되었으며, 순수 WPF 구현으로 높은 호환성과 성능을 제공합니다.

## 핵심 컴포넌트

### FlexiPaneContainer
분할 컨테이너의 최상위 컴포넌트로, 2개의 자식 요소를 관리합니다.

**주요 기능:**
- 첫 번째 자식 (왼쪽 또는 상단) 관리
- 두 번째 자식 (오른쪽 또는 하단) 관리  
- 분할 방향 제어 (수직/수평)
- 분할 비율 조정 (0.0 ~ 1.0)
- GridSplitter를 통한 실시간 크기 조정

### FlexiPaneItem
실제 콘텐츠를 담는 분할 가능한 패널입니다.

**주요 기능:**
- 사용자 콘텐츠 호스팅
- 고유 식별자 관리
- 제목/헤더 표시
- 닫기 기능 제어
- 분할 가능 여부 설정
- 이벤트 기반 상호작용

### FlexiPaneManager
분할 및 제거 로직을 처리하는 정적 매니저 클래스입니다.

**주요 기능:**
- 패널 분할 처리
- 패널 제거 관리
- 레이아웃 직렬화/역직렬화
- 트리 구조 재편성

## 이벤트 시스템

### 핵심 이벤트

**PaneSplitEventArgs**
- 분할 요청 시 발생하는 이벤트 데이터
- 소스 패널, 분할 방향, 비율 정보 포함
- 취소 가능한 이벤트

**PaneClosingEventArgs**
- 패널 닫기 요청 시 발생하는 이벤트 데이터
- 대상 패널과 닫기 사유 정보 포함
- 취소 가능한 이벤트

## 테마 시스템

### FlexiPaneTheme
라이브러리의 시각적 테마를 관리하는 시스템입니다.

**테마 요소:**
- Splitter 브러시 및 두께
- 패널 기본 스타일
- 분할 가이드 템플릿
- 오버레이 브러시
- 가이드라인 브러시

## 설계 원칙

### 1. 순수 WPF 구현
- 외부 의존성 없는 순수 WPF 구현
- .NET 9.0 기반, 하위 호환성 고려
- 하드웨어 가속 렌더링 활용

### 2. MVVM 친화적
- 데이터 바인딩 우선 API 설계
- Command 패턴 지원
- 의존성 속성 기반 구현

### 3. 확장성
- 플러그인 가능한 테마 시스템
- 커스텀 콘텐츠 지원
- 이벤트 기반 확장 포인트

### 4. 성능 최적화
- 스마트 리소스 관리
- IDisposable 패턴 구현
- 최적화된 렌더링

### 5. 접근성
- 키보드 탐색 지원
- 스크린 리더 호환성
- 고대비 테마 지원

## 사용 시나리오

### 기본 사용법
XAML에서 FlexiPaneHost 컨트롤 내부에 FlexiPaneItem을 배치하여 기본적인 분할 가능한 영역을 생성합니다.

### 프로그래매틱 분할
FlexiPaneManager를 통해 코드에서 직접 패널을 분할하거나 제거할 수 있습니다.

### 레이아웃 저장/복원
JSON 형태로 현재 레이아웃을 저장하고, 애플리케이션 재시작 시 복원할 수 있습니다.

## 차별화 요소

### 1. 경량성
- 최소한의 오버헤드
- 핵심 기능에 집중
- 빠른 로딩과 실행

### 2. 직관적 UI
- 시각적 분할 가이드
- 부드러운 애니메이션
- 사용자 친화적 인터페이스

### 3. 완전한 커스터마이징
- XAML 기반 테마 시스템
- 모든 UI 요소 재정의 가능
- 브랜드 일치 디자인 지원

### 4. 견고한 아키텍처
- 검증된 분할 알고리즘
- 메모리 누수 방지
- 예외 안전성 보장

이 설계는 WPF 생태계에서 최고 수준의 화면 분할 솔루션을 제공하며, 개발자들이 쉽게 채택하고 확장할 수 있는 구조를 가지고 있습니다.